---
export interface Song {
	isPlaying?: boolean;
	title?: string;
	artist?: string;
	image?: {
		url: string;
		width: number;
		height: number;
	};
	url?: string;
}

const baseUrl = import.meta.env.NODE_ENV === "production"
	? import.meta.env.BASE_URL
	: "http://localhost:4321/";

const res: Song = await fetch(baseUrl + "current_song").then((data) => data.json());
---

{
    res?.isPlaying ? 
    <div>
        Now playing: { res.title } by { res.artist }
        <img src={res.image?.url} width="200" height="200" alt={`Cover art for ${res.title}`}>
    </div> :
    <div>nothing playing rn</div>
}